#                                              Vim-style tmux Configuration
#1

# Bindings
# **********************************************************************************************************************
# Prefix
unbind C-b; set-option -g prefix C-a  # Set prefix to <C-a>

# Simple Bindings
# ********************
bind : command-prompt                 # :           Show command prompt.
bind r refresh-client                 # r           Refresh client.
bind v split-window -h                # v           Split horizontally.
bind s split-window -v                # s           Split vertically. 
bind h select-pane -L                 # h           Select left pane.
bind j select-pane -D                 # j           Select pane below.
bind k select-pane -U                 # h           Select pane above.
bind l select-pane -R                 # j           Select right pane.
bind C-o rotate-window                # <C-o>       Rotate window.
bind + select-layout main-horizontal  # +           Change layout to main-horizontal.
bind = select-layout main-vertical    # =           Change layout to main-vertical.
bind enter next-layout                # <enter>     Cycle layouts.
bind a last-pane                      # a           Select previously selected pane.
bind q display-panes                  # q           Display panes.
bind c new-window                     # c           Create new window.
bind t next-window                    # t           Switch to next window.      
bind T previous-window                # T           Switch to previous window.
bind [ copy-mode                      # [           Enter copy mode.
bind ] paste-buffer                   # ]           Paste clipboard buffer.
#  <defined later>                    # R           Reload tmux configuration.
#  <defined later>                    # [Copy] v    In copy mode, begin selection.
#  <defined later>                    # [Copy] y    In copy mode, yank selection.

unbind % ; unbind '"'                 # Remove old split keybindings.
# ********************

# Other Bindings
# ********************
# In copy mode, v begins selection and y yanks as in vim.
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"

# R reloads config.
bind R source-file $XDG_CONFIG_HOME/tmux/tmux.conf \; display-message "Reloaded tmux configuration."
# ********************

# **********************************************************************************************************************


# Status Line
# **********************************************************************************************************************
# Minimalistic monochtome statusline.
set-option -g status-position top   # Position status bar on top.
set -g status-bg black
set -g status-fg white
set -g status-left ''               # Show only tab line on the left.
set -g status-right '#h'            # Show hostname on the right.

# Use normal and bright monochrome colors to show a tab line on the left.
set  -g status-justify left
setw -g window-status-separator ''
setw -g window-status-format '#[bg=black,fg=white] #I #W '
setw -g window-status-current-format '#[bg=brightblack,fg=brightwhite] #I #W '

# Active pane indicated by yellow borders.
set -g window-style 'bg=default,fg=white'
set -g window-active-style 'bg=default,fg=brightwhite'
set -g pane-border-style 'bg=default,fg=black'
set -g pane-active-border-style 'bg=default,fg=yellow'


# Status Bar
set -g base-index 1       # Start indexing tabs from 1.
set -g status-interval 1  # Update statusline every second.
# **********************************************************************************************************************

# Options
# **********************************************************************************************************************
setw -g mode-keys vi                          # vi mode
setw -g mouse on                              # Enable mouse
set  -g default-terminal screen-256color      # idk
set  -g focus-events on                       # idk
set  -g set-clipboard on                      # Allow tmux<->OS clipboard buffer sync.
set  -sa terminal-features ',alacritty:RGB'   # Enable true color.
set  -s escape-time 0                         # Remove delay when switching from Insert to Normal mode in vim.
setw -g monitor-activity on                   # Set window notifications
set  -g visual-activity on                    # 
set  -g repeat-time 500                       # Allow the arrow key to be used immediately after changing windows
# **********************************************************************************************************************


# Misc
# **********************************************************************************************************************
bind C-l send-keys 'C-l'  # <prefix> <C-l> to clear screen since <C-l> is mapped.
# **********************************************************************************************************************
